<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Framework Demo</title>
</head>
<body>
  <script src="../../dist/index.min.js"></script>
  <div>
    <span>Using hash</span>
    <a href="#/only-1">Only app 1</a>
    <a href="#/only-2">Only app 2</a>
    <a href="#/welcome">Both</a>
    <a href="#/unknown">None</a>
  </div>
  <div>
    <span>Using history API</span>
    <button onclick="usePushState(event)" data-path="/only-1">Only app 1</button>
    <button onclick="usePushState(event)" data-path="/only-2">Only app 2</button>
    <button onclick="usePushState(event)" data-path="/welcome">Both</button>
    <button onclick="usePushState(event)" data-path="/unknown">None</button>
  </div> 
  <iframe is="micro-front" app-id="app-1"></iframe>
  <iframe is="micro-front" app-id="app-2"></iframe>
  <script>
    const config = {
      routes: {
        '/welcome': {
          active: ['app-1', 'app-2'],
          disabled: []
        },
        '/only-1': {
          active: ['app-1'],
          disabled: ['app-2']
        },
        '/only-2': {
          active: ['app-2'],
          disabled: ['app-1']
        },
        '*': {
          disabled: ['app-1', 'app-2'],
          active: []
        }
      },
      apps: {
        'app-1': './app1',
        'app-2': './app2'
      }
    };
    Microfronts.init(config);
    Microfronts.AppContext.set('event.bus', Microfronts.channel('global'));

    function usePushState(event) {
      const target = event.target;
      const route = target.dataset.path;
      window.history.pushState(null, null, route);
    }
  </script>
  <script></script>
</body>
</html>